<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Quick Start â€¢ BORG</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Quick Start">
<script>
// Redirect any case variation of /borg to /BORG
(function() {
  var path = window.location.pathname;
  if (/^\/borg\b/i.test(path) && !/^\/BORG/.test(path)) {
    var newPath = path.replace(/^\/borg/i, '/BORG');
    window.location.replace(newPath + window.location.search + window.location.hash);
  }
})();
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BORG</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/quickstart.html">Get Started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/quickstart.html">Quick Start</a></li>
    <li><a class="dropdown-item" href="../articles/risk-taxonomy.html">Risk Taxonomy</a></li>
    <li><a class="dropdown-item" href="../articles/frameworks.html">Framework Integration</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/gcol33/BORG" aria-label="GitHub"><span class="fa fab fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Quick Start</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/gcol33/BORG/blob/HEAD/vignettes/quickstart.Rmd" class="external-link"><code>vignettes/quickstart.Rmd</code></a></small>
      <div class="d-none name"><code>quickstart.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="what-is-borg">What is BORG?<a class="anchor" aria-label="anchor" href="#what-is-borg"></a>
</h2>
<p>BORG (Bounded Outcome Risk Guard) automatically detects when model
evaluation is compromised by information leakage between training and
test data. It identifies violations that inflate performance estimates
and provides actionable remediation.</p>
</div>
<div class="section level2">
<h2 id="the-problem">The Problem<a class="anchor" aria-label="anchor" href="#the-problem"></a>
</h2>
<p>Consider a common machine learning workflow:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Typical workflow (PROBLEMATIC)</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"my_data.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Preprocessing on FULL data - LEAKS TEST INFO</span></span>
<span><span class="va">data_scaled</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Split AFTER preprocessing</span></span>
<span><span class="va">train_idx</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">800</span></span>
<span><span class="va">test_idx</span> <span class="op">&lt;-</span> <span class="fl">801</span><span class="op">:</span><span class="fl">1000</span></span>
<span><span class="va">train</span> <span class="op">&lt;-</span> <span class="va">data_scaled</span><span class="op">[</span><span class="va">train_idx</span>, <span class="op">]</span></span>
<span><span class="va">test</span> <span class="op">&lt;-</span> <span class="va">data_scaled</span><span class="op">[</span><span class="va">test_idx</span>, <span class="op">]</span></span>
<span></span>
<span><span class="co"># Model training and evaluation</span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu">train_model</span><span class="op">(</span><span class="va">train</span><span class="op">)</span></span>
<span><span class="va">performance</span> <span class="op">&lt;-</span> <span class="fu">evaluate</span><span class="op">(</span><span class="va">model</span>, <span class="va">test</span><span class="op">)</span>  <span class="co"># Inflated!</span></span></code></pre></div>
<p>The problem: <code><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale()</a></code> computed mean and standard
deviation using ALL data, including the test set. This means:</p>
<ul>
<li>Training data contains test set statistics</li>
<li>Test performance is artificially inflated</li>
<li>Results do not generalize to truly unseen data</li>
</ul>
</div>
<div class="section level2">
<h2 id="borg-solution">BORG Solution<a class="anchor" aria-label="anchor" href="#borg-solution"></a>
</h2>
<div class="section level3">
<h3 id="proactive-guarding">Proactive Guarding<a class="anchor" aria-label="anchor" href="#proactive-guarding"></a>
</h3>
<p>Use <code><a href="../reference/borg_guard.html">borg_guard()</a></code> to create a protected evaluation
context:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/gcol33/BORG" class="external-link">BORG</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create guarded context BEFORE any preprocessing</span></span>
<span><span class="va">ctx</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/borg_guard.html">borg_guard</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">my_data</span>,</span>
<span>  train_idx <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">800</span>,</span>
<span></span>
<span>  test_idx <span class="op">=</span> <span class="fl">801</span><span class="op">:</span><span class="fl">1000</span>,</span>
<span>  mode <span class="op">=</span> <span class="st">"strict"</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># Mode options:</span></span>
<span><span class="co">#   "strict"  - Error on any violation</span></span>
<span><span class="co">#   "warn"    - Warn but continue</span></span>
<span><span class="co">#   "rewrite" - Auto-fix where possible</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="object-inspection">Object Inspection<a class="anchor" aria-label="anchor" href="#object-inspection"></a>
</h3>
<p>Inspect existing objects for leakage:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check a preprocessing object</span></span>
<span><span class="va">pp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/preProcess.html" class="external-link">preProcess</a></span><span class="op">(</span><span class="va">full_data</span>, method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"center"</span>, <span class="st">"scale"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/borg_inspect.html">borg_inspect</a></span><span class="op">(</span><span class="va">pp</span>, train_idx <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">800</span>, test_idx <span class="op">=</span> <span class="fl">801</span><span class="op">:</span><span class="fl">1000</span>, data <span class="op">=</span> <span class="va">full_data</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="va">result</span><span class="op">@</span><span class="va">is_valid</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span>  <span class="co"># Detailed risk report</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="workflow-validation">Workflow Validation<a class="anchor" aria-label="anchor" href="#workflow-validation"></a>
</h3>
<p>Validate an entire evaluation pipeline:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/borg_validate.html">borg_validate</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">my_data</span>,</span>
<span>  train_idx <span class="op">=</span> <span class="va">train_idx</span>,</span>
<span>  test_idx <span class="op">=</span> <span class="va">test_idx</span>,</span>
<span>  preprocess <span class="op">=</span> <span class="va">my_recipe</span>,</span>
<span>  model <span class="op">=</span> <span class="va">fitted_model</span></span>
<span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check results</span></span>
<span><span class="va">result</span><span class="op">@</span><span class="va">is_valid</span>      <span class="co"># TRUE/FALSE</span></span>
<span><span class="va">result</span><span class="op">@</span><span class="va">n_hard</span>        <span class="co"># Count of hard violations</span></span>
<span><span class="va">result</span><span class="op">@</span><span class="va">n_soft</span>        <span class="co"># Count of soft warnings</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span>  <span class="co"># Tabular risk summary</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="risk-classification">Risk Classification<a class="anchor" aria-label="anchor" href="#risk-classification"></a>
</h2>
<p>BORG classifies risks into two categories:</p>
<div class="section level3">
<h3 id="hard-violations-block">Hard Violations (Block)<a class="anchor" aria-label="anchor" href="#hard-violations-block"></a>
</h3>
<p>These invalidate evaluation entirely:</p>
<ul>
<li>
<strong>Index overlap</strong>: Same rows in train and test</li>
<li>
<strong>Preprocessing leak</strong>: Normalization/imputation fitted
on full data</li>
<li>
<strong>Target leakage</strong>: Features derived from the
outcome</li>
<li>
<strong>Temporal look-ahead</strong>: Using future information for
past predictions</li>
</ul>
</div>
<div class="section level3">
<h3 id="soft-inflation-warn">Soft Inflation (Warn)<a class="anchor" aria-label="anchor" href="#soft-inflation-warn"></a>
</h3>
<p>These bias results but may preserve model ranking:</p>
<ul>
<li>
<strong>Insufficient spatial blocking</strong>: Block size smaller
than autocorrelation range</li>
<li>
<strong>Post-hoc subgroup analysis</strong>: Discovering subgroups
on test data</li>
<li>
<strong>Proxy leakage</strong>: Features suspiciously correlated
with target</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="common-patterns">Common Patterns<a class="anchor" aria-label="anchor" href="#common-patterns"></a>
</h2>
<div class="section level3">
<h3 id="cross-validation">Cross-Validation<a class="anchor" aria-label="anchor" href="#cross-validation"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># BAD: preprocessing before CV</span></span>
<span><span class="va">data_scaled</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="va">cv_results</span> <span class="op">&lt;-</span> <span class="fu">cross_validate</span><span class="op">(</span><span class="va">data_scaled</span><span class="op">)</span>  <span class="co"># Leaky!</span></span>
<span></span>
<span><span class="co"># GOOD: preprocessing inside CV folds</span></span>
<span><span class="va">ctx</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/borg_guard.html">borg_guard</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">train_idx</span>, <span class="va">test_idx</span>, mode <span class="op">=</span> <span class="st">"strict"</span><span class="op">)</span></span>
<span><span class="co"># Preprocessing must happen per-fold</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="temporal-splits">Temporal Splits<a class="anchor" aria-label="anchor" href="#temporal-splits"></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Enable temporal validation</span></span>
<span><span class="va">ctx</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/borg_guard.html">borg_guard</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">ts_data</span>,</span>
<span>  train_idx <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">800</span>,</span>
<span>  test_idx <span class="op">=</span> <span class="fl">801</span><span class="op">:</span><span class="fl">1000</span>,</span>
<span>  temporal_col <span class="op">=</span> <span class="st">"date"</span>  <span class="co"># Validates ordering</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="grouped-data">Grouped Data<a class="anchor" aria-label="anchor" href="#grouped-data"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Ensure group isolation</span></span>
<span><span class="va">ctx</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/borg_guard.html">borg_guard</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">patient_data</span>,</span>
<span>  train_idx <span class="op">=</span> <span class="va">train_idx</span>,</span>
<span>  test_idx <span class="op">=</span> <span class="va">test_idx</span>,</span>
<span>  group_col <span class="op">=</span> <span class="st">"patient_id"</span>  <span class="co"># No patient in both sets</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="next-steps">Next Steps<a class="anchor" aria-label="anchor" href="#next-steps"></a>
</h2>
<ul>
<li>
<a href="risk-taxonomy.html">Risk Taxonomy</a>: Full catalog of
detectable risks</li>
<li>
<a href="frameworks.html">Framework Integration</a>: Using BORG with
caret, tidymodels, mlr3</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/gcol33" class="external-link">Gilles Colling</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
